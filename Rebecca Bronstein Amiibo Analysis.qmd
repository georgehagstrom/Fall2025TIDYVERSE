---
title: "Tidyverse"
date: "2025-12-08"
author: "Rebecca Bronstein"
format: pdf
---

## 1. Description of the API and Questions of Interest

The API I selected provides a comprehensive list of Amiibo, the small NFC-enabled Nintendo figurines and cards first introduced alongside *Super Smash Bros.* for the Wii U and 3DS and still supported today. The dataset includes franchise, character, Amiibo series, and release dates for North America, Japan, Australia, and Europe.

I am interested in exploring three questions:

-   **Which Amiibo series has the most figures?**\
-   **Which character has the most variants?**\
-   **Which character appears across the most franchises?**

## 2. Downloading, Cleaning, and Analyzing the Data Using httr2 and the Tidyverse

```{r Prep}
library(httr2)
library(jsonlite)
library(dplyr)
library(tibble)
library(stringr)
library(ggplot2)

resp <- request("https://amiiboapi.com/api/amiibo/") |> req_perform()
data <- resp_body_string(resp) |> fromJSON(flatten = TRUE)
amiibo <- as_tibble(data$amiibo)
```

### Question 1 — Amiibo Series with the Most Figures

```{r Q1}
series_count <- amiibo |> count(amiiboSeries, sort = TRUE)

ggplot(series_count |> slice_max(n, n = 10),
       aes(x = reorder(amiiboSeries, n), y = n)) +
  geom_col() + coord_flip() +
  labs(title = "Top 10 Amiibo Series by Number of Figures",
       x = "Amiibo Series", y = "Number of Figures") +
  theme_minimal()
```

### Question 2 — Characters with the Most Variants

```{r Q2}
character_variants <- amiibo |> count(character, sort = TRUE)

ggplot(character_variants |> slice_max(n, n = 10),
       aes(x = reorder(character, n), y = n)) +
  geom_col() + coord_flip() +
  labs(title = "Top 10 Characters by Number of Amiibo Variations",
       x = "Character", y = "Number of Variants") +
  theme_minimal()
```

### Question 3 — Characters Appearing Across the Most Franchises

```{r Q3}
character_game_franchises <- amiibo |>
  distinct(character, gameSeries) |> count(character, sort = TRUE)

ggplot(character_game_franchises |> slice_max(n, n = 10),
       aes(x = reorder(character, n), y = n)) +
  geom_col() + coord_flip() +
  labs(title = "Top 10 Characters by Number of Game Franchises",
       x = "Character", y = "Number of Franchises") +
  theme_minimal()
```

## Daisy Franchise Check

```{r Daisy}
daisy_franchises <- amiibo |>
  filter(character == "Daisy") |>
  distinct(gameSeries)

daisy_franchises
```

## Figures vs Cards by Franchise

```{r Figure vs Card}
library(tidyr)

amiibo2 <- amiibo %>%
  mutate(type_norm = str_to_lower(type),
         franchise = gameSeries) %>%
  filter(type_norm %in% c("figure", "card"))

franchise_counts <- amiibo2 %>%
  count(franchise, type_norm, name = "count") %>%
  pivot_wider(names_from = type_norm, values_from = count, values_fill = 0) %>%
  mutate(total = figure + card)

top10 <- franchise_counts |> slice_max(total, n = 10)

plot_df <- top10 |> select(franchise, figure, card) |>
  pivot_longer(cols = c("figure", "card"),
               names_to = "type", values_to = "count")

plot_df$type <- dplyr::recode(plot_df$type,
                              "card" = "Card",
                              "figure" = "Figure")

ggplot(plot_df, aes(x = reorder(franchise, count),
                    y = count, fill = type)) +
  geom_col(position = "dodge") + coord_flip() +
  labs(title = "Top 10 Amiibo Franchises: Figures vs Cards",
       x = "Franchise", y = "Count", fill = "Amiibo Type") +
  theme_minimal(base_size = 14)
```

## Isabelle Breakdown: Figures vs Cards

```{r Isabelle}
isabelle <- amiibo |> filter(str_detect(name, regex("Isabelle", ignore_case = TRUE)))

isabelle_counts <- isabelle %>%
  mutate(type = str_to_title(type)) %>%
  count(type, name = "count")

isabelle_counts
```

## 3. Conclusion

After the initial data analysis, several interesting and unexpected results emerged.

### **Question 1 — Which franchise has the most Amiibo?**

It was surprising to discover that *Animal Crossing* has such a large number of Amiibo, particularly due to the enormous number of cards produced for the series. This observation motivated the comparison between figures and cards. By contrast, it is unsurprising that *Super Smash Bros.* contains the most figures, since nearly every fighter in the roster received an Amiibo.

### **Question 2 — Which characters have the most variants?**

Mario leading the list—followed by Yoshi, Link, and Peach—aligns with expectations, as these are some of Nintendo’s most iconic characters. Yoshi benefits from having his own franchise in addition to appearing in multiple Mario titles, giving him more opportunities for variations. Because Animal Crossing contained so many Amiibo, I examined Isabelle specifically. She has 7 cards and 3 figures, which is notable because Animal Crossing is primarily card-based, making her higher number of figures somewhat surprising.

### **Question 3 — Which characters appear across the most franchises?**

It was unexpected to find that characters like Mario and Yoshi appeared in only two franchises in this dataset. In reality, they are present across many titles—including *Mario Party*, *Mario Odyssey*, *Super Smash Bros.*, and *Yoshi’s Woolly World*. This inconsistency suggests that the API may be outdated or incomplete with respect to franchise classification.

One interesting data anomaly involved Daisy, who appeared across three franchises, including one labeled simply “Daisy” within the Animal Crossing series. This appears to be a naming artifact or inconsistency within the dataset rather than a true multi-franchise presence, and it required further inspection.

### **Overall Interpretation**

Overall, this analysis offered an insightful look into a small but fascinating part of Nintendo’s history. The dataset revealed unexpected trends, notable inconsistencies, and opportunities for further examination of how Amiibo data is categorized and maintained.
